# BTD5-Chinese-Translation
Steam版Bloons TD 5的汉化补丁仓库

已更新至4.6版本

由于我不常看github如果你提交的issue或者其他东西我长时间没回应的话就在b站私我：https://space.bilibili.com/3546561216776957

## 使用方法
下载该仓库内的所有文件，将Assets文件夹覆盖掉游戏目录内的Assets文件夹即可，如果不小心删了什么不该删的文件就在steam里用验证游戏文件完整性补全

如果打完补丁之后出现游戏加载变慢的情况（如防御塔和特工页面加载变慢），将语言切换为日语可使用低清字体加快加载速度

## 汉化方法
本汉化补丁的原理是替换原游戏内的字体文件和本地化文本文件实现汉化

### 游戏内文本
Assets/Loc目录下的两个xml文件包含游戏内使用的所有文本，通过修改xml文件中T标签的内容可以实现游戏内文本的汉化，游戏在英语语言下会使用English.xml的文本，在日语语言下会使用Japanese.xml的文本

font标签则是指定该语言所使用的字体，要使英语和日语使用清晰度不同的字体，要注意在复制粘贴时不要将font标签一起粘贴过去（原因见“字体”部分）

### 字体
Assets/Fonts目录存放了游戏使用的字体文件，Ultra和High文件夹存放了清晰度不同的字体文件，Ultra的清晰度高于High

游戏使用的字体分为两部分：字体描述文件（后缀为fnt），字体图像（后缀为png）。字体图像存放了每个字的图形，而字体描述文件则记录了字体的信息以及指出每个字的位置和大小。该字体可以使用bmfont工具生成：https://angelcode.com/products/bmfont/ （bmfont工具的使用方法请自行搜索相关教程）

由于过大的字体图像会影响游戏的加载速度，因此需要制作两种清晰度不同的字体使字体不会拖慢性能较低的电脑的加载速度

游戏会根据本地化文本文件中font标签所指定的字体在Fonts目录中以Ultra，High，Low的顺序查找字体，使用最先找到的字体显示文本，因此在制作不同清晰度的字体的时候需要给每类字体使用不同的文件名，本地化文本文件使用的字体也不能相同

另外，游戏使用的每类字体还分为描边（generic_font_stroke.fnt）和无描边（generic_font.fnt）两种字体，因此生成字体时要需要生成两种字体
